---
title: HTTP 的不同连接方式
date: 2026-02-24
excerpt: 介绍 HTTP 协议中的持续连接与非持续连接、流水线与非流水线、串行与并行等概念
---

## 一、持续连接与非持续连接

|   |   |   |   |
|---|---|---|---|
|类型|定义|优点|缺点|
|**非持续连接**（Non-persistent）|每个HTTP请求/响应对都使用一个单独的TCP连接，请求完成后连接立即关闭。|简单、易于实现，服务器资源释放快。|每个请求都需要建立和关闭TCP连接，延迟较高，效率低。|
|**持续连接**（Persistent）|多个HTTP请求/响应对可以复用同一个TCP连接，连接不会立即关闭。|减少了TCP连接建立和关闭的开销，延迟更低，效率更高，适合网页加载。|服务器需要维护连接状态，可能占用更多资源，但现代服务器已优化此问题。|

---

## 二、流水线与非流水线（仅适用于持续连接）

|   |   |   |   |
|---|---|---|---|
|类型|定义|优点|缺点|
|**非流水线**（Non-pipelined）|客户端在发送下一个请求之前必须等待当前请求的响应返回。|实现简单，服务器处理顺序明确。|请求之间仍需等待响应，存在“队头阻塞”问题，效率较低。|
|**流水线**（Pipelined）|客户端可以连续发送多个请求，无需等待前一个请求的响应返回。|减少了等待时间，提高了连接利用率和效率。|服务器必须按请求顺序返回响应，若某个请求处理慢，仍会阻塞后续响应。|

> ⚠️ 注意：HTTP/1.1支持流水线，但由于上述“队头阻塞”问题，实际浏览器和服务器很少启用流水线功能。HTTP/2通过多路复用解决了这个问题。

---
## 三、串行与并行（请求的发送方式）

|   |   |   |   |
|---|---|---|---|
|类型|定义|优点|缺点|
|**串行**|请求一个接一个地发送，前一个请求完成后才发送下一个请求。|实现简单，逻辑清晰。|效率低，延迟高，无法充分利用网络带宽。|
|**并行**|多个请求同时发送，通常通过建立多个TCP连接（如HTTP/1.1）或多路复用（如HTTP/2）实现。|提高了加载速度，充分利用网络带宽。|实现复杂，可能增加服务器负担，需要合理控制并发数量。|

---
## 四、概念关系总结（帮助理解）

- **非持续连接**一定是**串行**的，因为每个请求都要重新建立TCP连接，无法并行。
    
- **持续连接**可以是**串行**非流水线）或**并行**流水线，但实际不常用）。
    
- **并行**通常通过**多个TCP连接** （HTTP/1.1）或**多路复用**（HTTP/2）实现，而不是依赖流水线。
    
- **HTTP/2**使用**多路复用**技术，真正实现了高效的**并行传输**，解决了HTTP/1.x的队头阻塞问题。

---
## 五、举例说明（假设网页有3个资源：HTML、CSS、JS）

|   |   |   |   |
|---|---|---|---|
|类型组合|连接方式|请求方式|特点描述|
|非持续连接 + 串行|每个资源新建一个TCP连接，串行发送请求。|慢，效率最低。||
|持续连接 + 非流水线 + 串行|复用一个TCP连接，但请求串行发送，等待响应后再发下一个。|较慢，有等待延迟。||
|持续连接 + 流水线 + 串行|复用一个TCP连接，请求连续发送，但服务器按顺序响应。|较快，但仍有队头阻塞风险。||
|持续连接 + 并行（多连接）|建立多个TCP连接（如6个），同时发送请求。|较快，现代浏览器常用方式。||
|HTTP/2 + 多路复用|一个TCP连接内并行传输多个请求/响应，无队头阻塞。|最快，现代趋势。||

---
## 六、总结一句话记忆

- **非持续连接**像每次打电话只说一句话就挂，**持续连接**像打电话聊很多事。
    
- **非流水线**像说话等对方回答再说下一句，**流水线**像连珠炮发问但对方必须按顺序回答。
    
- **串行**像排队买票，**并行**像开多个窗口买票。
    
- **HTTP/2**像开了一个超级窗口，一个人可以同时处理多个人的买票请求，互不干扰。
